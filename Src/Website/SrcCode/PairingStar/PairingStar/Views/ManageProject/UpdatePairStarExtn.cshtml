@{
    Layout = null;
}
<!DOCTYPE html>

<html>
<head>
    <title>Update Pair Star for Extn</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link type="text/css" href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" rel="Stylesheet" />
    
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>    
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")"></script>

</head>
<body style="background-color:white;margin:0px;color:#009ad9;font-size:10px;font-family:Verdana">
    <div class="page">
        
@model PairingStar.Models.UpdatePairModel
@{
    ViewBag.Title = "UpdatePairStar";
}

<script type="text/javascript">
    var selectedPairname;
    HighlightPairPanel = function (divObj) {
        divObj.style.backgroundColor = '#dceafa';
    }

    UnHighlightPairPanel = function (divObj) {
          divObj.style.backgroundColor = '#fff';
    }

    SelectPairPanel = function (pairName, divObj) {
         if(selectedPairname==pairName)
         {
             selectedPairname=undefined;
             divObj.style.backgroundColor = '';
             return;
         }
        selectedPairname = pairName;
        $(".userpanelpairsextn").css({ 'border': 'solid 1px #5c87b2' });
        divObj.style.border = 'solid 1px #a30303';
    }

    $(function () {
        $("#datepicker").datepicker();
    });

    updatePairDetails = function (overridedata) {        
       
        @{var pair=(Model.PairOne==null)?string.Empty:Model.PairOne.UserName;}
       var pairOne='@pair'
        var dateSelected=$("#datepicker").val();
        var secondPair=selectedPairname;
        var pairTime=$("input[name='pairedTime']:checked").val();
        if(secondPair==undefined)
        {
        var isLonepair=confirm("Are you a lone pair?")
            if(isLonepair)
            {
                secondPair=pairOne;
                selectedPairname=secondPair;
            }
            else             
             return;
        }

        var pairingData={pairName:pairOne,secondPair:secondPair,date:dateSelected,time:pairTime,overrideData:overridedata};

        $.ajax({
          url: '../UpdatePairStarData/',
          data:pairingData,
          success: sucessDel,
          error:function(e){alert(e.responseText)},
          cache: false        
        });

    }

var  sucessDel=function(data){
        if(data=='success')
        {
            alert('Information is succesfully updated.')
        }
        else 
        {
        var isOverride=confirm(data+" Do you want to override?");
            if(isOverride)updatePairDetails(true);
        }
    }


</script>
  
    <div style="width:240px;margin-top:10px;overflow-x:hidden;float:left;clear:left;" >
    <input id="datepicker" readonly="readonly" type="text" style="width:60px;cursor:hand; height:10px;margin-left:4px;font-size:10px;" value="@System.DateTime.Today.ToShortDateString()"/>
    <I style="padding-left:60px;" >Select your pair</I>

    <br/> 
    <div style="float:left;">
    
   <div class="userpanelextn" style="color:#000">
    @Model.PairOne.UserName<br/>    
    <img src='@Url.Action("show", "ManageProject", new { id = @Model.PairOne.ID })' width="60px" height="60px" />
    </div>   
        <div style="float:left;clear:left; width:130px;"><br />
        <input type="radio" name="pairedTime" checked="checked"  value="1"/>Full day  <br />
        <input name="pairedTime" type="radio" value="0.5" />Half day <br /><br />
        <input type="button" value="Update" style="background-color:#cde1fa;border:solid 1px #009ad9;font-size:10px;font-family:verdana "  onclick="updatePairDetails();" />
        </div>
    </div>

    <div style="float:left;">
    
    <div style="float:left;clear:left;width:85px;color:#000">
    @foreach (var otherUsers in @Model.OtherUsers)
    {
         <div class="userpanelpairsextn" onmouseover="HighlightPairPanel(this);" onmouseout="UnHighlightPairPanel(this);" onclick="SelectPairPanel('@otherUsers.UserName',this)"> 
                @otherUsers.UserName <br/>
                <img src='@Url.Action("show", "ManageProject", new { id = otherUsers.ID })' width="70px" height="70px" />    
         </div>
    }
    </div>
    </div>
    </div>




    </div>
</body>
</html>
