@{
    Layout = null;
}
<!DOCTYPE html>

<html>
<head>
    <title>Update Pair Star for Extn</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link type="text/css" href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" rel="Stylesheet" />
    
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>    
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")"></script>

</head>
<body style="background-color:white;margin:0px">
    <div class="page">
        
@model PairingStar.Models.UpdatePairModel
@{
    ViewBag.Title = "UpdatePairStar";
}

<script type="text/javascript">
    var selectedPairname;
    HighlightPairPanel = function (divObj) {
        divObj.style.border = 'solid 1px red';
    }

    UnHighlightPairPanel = function (divObj) {
        divObj.style.border = '1px solid #5c87b2';
    }

    SelectPairPanel = function (pairName, divObj) {
         if(selectedPairname==pairName)
         {
             selectedPairname=undefined;
             divObj.style.backgroundColor = '';
             return;
         }
        selectedPairname = pairName;
        $(".userpanelpairs").css({ 'backgroundColor': '' });
        divObj.style.backgroundColor = '#eeeeee';
    }

    $(function () {
        $("#datepicker").datepicker();
    });

    updatePairDetails = function (overridedata) {        
       
        @{var pair=(Model.PairOne==null)?string.Empty:Model.PairOne.UserName;}
       var pairOne='@pair'
        var dateSelected=$("#datepicker").val();
        var secondPair=selectedPairname;
        var pairTime=$("input[name='pairedTime']:checked").val();
        if(secondPair==undefined)
        {
        var isLonepair=confirm("Are you a lone pair?")
            if(isLonepair)
            {
                secondPair=pairOne;
                selectedPairname=secondPair;
            }
            else             
             return;
        }

        var pairingData={pairName:pairOne,secondPair:secondPair,date:dateSelected,time:pairTime,overrideData:overridedata};

        $.ajax({
          url: '../UpdatePairStarData/',
          data:pairingData,
          success: sucessDel,
          error:function(e){alert(e.responseText)},
          cache: false        
        });

    }

var  sucessDel=function(data){
        if(data=='success')
        {
            alert('Information is succesfully updated.')
        }
        else 
        {
        var isOverride=confirm(data+" Do you want to override?");
            if(isOverride)updatePairDetails(true);
        }
    }


</script>

    <div style="float:left;">
        <h2 style="float:left;padding-left:250px;">Select your pair</h2> 
    </div>

    <div style="width:530px;height:600px;overflow-y:scroll;overflow-x:hidden;float:left;clear:left;" >
    <div style="float:left;">
   <div class="userpanel">
    @Html.LabelFor(m => m.PairOne.UserName) :  @Model.PairOne.UserName<br/>
    @Html.LabelFor(m => m.PairOne.Role) : @Model.PairOne.Role<br/>
     @Html.LabelFor(m => m.PairOne.Gender) : @Model.PairOne.Gender<br/><br/>
    <img src='@Url.Action("show", "ManageProject", new { id = @Model.PairOne.ID })' width="200px" height="200px" />
    </div>   
        <div style="float:left;clear:left; width:200px;">
        <br />
        ON &nbsp; <input id="datepicker" readonly="readonly" type="text" style="width:100px;" value="@System.DateTime.Today.ToShortDateString()"/>
        <br /><br />
        <input type="radio" name="pairedTime" checked="checked"  value="1"/>Full day 
        <input name="pairedTime" type="radio" value="0.5" />Half day <br /><br />
        <input type="button" value="Update" onclick="updatePairDetails();" />
        </div>
    </div>

    <div style="float:left;padding-left:30px">
    
    <div style="float:left;clear:left;width:270px">
    @foreach (var otherUsers in @Model.OtherUsers)
    {
         <div class="userpanelpairs" onmouseover="HighlightPairPanel(this);" onmouseout="UnHighlightPairPanel(this);" onclick="SelectPairPanel('@otherUsers.UserName',this)"> 
               @Html.LabelFor(m => otherUsers.UserName) :  @otherUsers.UserName <br/>
                @Html.LabelFor(m => otherUsers.Role) : @otherUsers.Role<br/>
                 @Html.LabelFor(m => otherUsers.Gender) : @otherUsers.Gender<br/><br/>
                <img src='@Url.Action("show", "ManageProject", new { id = otherUsers.ID })' width="50px" height="50px" />    
         </div>
    }
    </div>
    </div>
    </div>




    </div>
</body>
</html>
